!function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e){L.geokeys=e.exports={control:t("./src/geokeys")}},{"./src/geokeys":7}],2:[function(t,e){function n(t,e,n){function o(t){return t>=200&&300>t||304===t}function r(){void 0===a.status||o(a.status)?e.call(a,null,a):e.call(a,a,null)}var i=!1;if("undefined"==typeof window.XMLHttpRequest)return e(Error("Browser not supported"));if("undefined"==typeof n){var s=t.match(/^\s*https?:\/\/[^\/]*/);n=s&&s[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var a;if(!n||"object"!=typeof window.XDomainRequest&&"function"!=typeof window.XDomainRequest)a=new window.XMLHttpRequest;else{a=new window.XDomainRequest;var c=e;e=function(){if(i)c.apply(this,arguments);else{var t=this,e=arguments;setTimeout(function(){c.apply(t,e)},0)}}}return"onload"in a?a.onload=r:a.onreadystatechange=function(){4===a.readyState&&r()},a.onerror=function(t){e.call(this,t||!0,null),e=function(){}},a.onprogress=function(){},a.ontimeout=function(t){e.call(this,t,null),e=function(){}},a.onabort=function(t){e.call(this,t,null),e=function(){}},a.open("GET",t,!0),a.send(null),i=!0,a}"undefined"!=typeof e&&(e.exports=n)},{}],3:[function(t,e,n){!function(t){function e(t){if(e[t]!==i)return e[t];var n;if("bug-string-char-index"==t)n="a"!="a"[0];else if("json"==t)n=e("json-stringify")&&e("json-parse");else{var o,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var a=l.stringify,c="function"==typeof a&&u;if(c){(o=function(){return 1}).toJSON=o;try{c="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(s)===i&&a(i)===i&&a()===i&&"1"===a(o)&&"[1]"==a([o])&&"[null]"==a([i])&&"null"==a(null)&&"[null,null,null]"==a([i,s,null])&&a({a:[o,!0,!1,null,"\x00\b\n\f\r	"]})==r&&"1"===a(null,o)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(f){c=!1}}n=c}if("json-parse"==t){var p=l.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){o=p(r);var h=5==o.a.length&&1===o.a[0];if(h){try{h=!p('"	"')}catch(f){}if(h)try{h=1!==p("01")}catch(f){}if(h)try{h=1!==p("1.")}catch(f){}}}}catch(f){h=!1}n=h}}return e[t]=!!n}var o,r,i,s={}.toString,a="function"==typeof define&&define.amd,c="object"==typeof JSON&&JSON,l="object"==typeof n&&n&&!n.nodeType&&n;l&&c?(l.stringify=c.stringify,l.parse=c.parse):l=t.JSON=c||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(f){}if(!e("json")){var p="[object Function]",h="[object Date]",d="[object Number]",g="[object String]",m="[object Array]",v="[object Boolean]",y=e("bug-string-char-index");if(!u)var b=Math.floor,L=[0,31,59,90,120,151,181,212,243,273,304,334],_=function(t,e){return L[e]+365*(t-1970)+b((t-1969+(e=+(e>1)))/4)-b((t-1901+e)/100)+b((t-1601+e)/400)};(o={}.hasOwnProperty)||(o=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=s?o=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,o=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,o.call(this,t)});var x={"boolean":1,number:1,string:1,undefined:1},j=function(t,e){var n=typeof t[e];return"object"==n?!!t[e]:!x[n]};if(r=function(t,e){var n,i,a,c=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(a in i)o.call(i,a)&&c++;return n=i=null,c?r=2==c?function(t,e){var n,r={},i=s.call(t)==p;for(n in t)i&&"prototype"==n||o.call(r,n)||!(r[n]=1)||!o.call(t,n)||e(n)}:function(t,e){var n,r,i=s.call(t)==p;for(n in t)i&&"prototype"==n||!o.call(t,n)||(r="constructor"===n)||e(n);(r||o.call(t,n="constructor"))&&e(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],r=function(t,e){var n,r,a=s.call(t)==p,c=!a&&"function"!=typeof t.constructor&&j(t,"hasOwnProperty")?t.hasOwnProperty:o;for(n in t)a&&"prototype"==n||!c.call(t,n)||e(n);for(r=i.length;n=i[--r];c.call(t,n)&&e(n));}),r(t,e)},!e("json-stringify")){var w={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C="000000",T=function(t,e){return(C+(e||0)).slice(-t)},U="\\u00",S=function(t){var e,n='"',o=0,r=t.length,i=r>10&&y;for(i&&(e=t.split(""));r>o;o++){var s=t.charCodeAt(o);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=w[s];break;default:if(32>s){n+=U+T(2,s.toString(16));break}n+=i?e[o]:y?t.charAt(o):t[o]}}return n+'"'},D=function(t,e,n,a,c,l,u){var f,p,y,L,x,j,w,C,U,k,O,M,A,E,R,q;try{f=e[t]}catch(H){}if("object"==typeof f&&f)if(p=s.call(f),p!=h||o.call(f,"toJSON"))"function"==typeof f.toJSON&&(p!=d&&p!=g&&p!=m||o.call(f,"toJSON"))&&(f=f.toJSON(t));else if(f>-1/0&&1/0>f){if(_){for(x=b(f/864e5),y=b(x/365.2425)+1970-1;_(y+1,0)<=x;y++);for(L=b((x-_(y,0))/30.42);_(y,L+1)<=x;L++);x=1+x-_(y,L),j=(f%864e5+864e5)%864e5,w=b(j/36e5)%24,C=b(j/6e4)%60,U=b(j/1e3)%60,k=j%1e3}else y=f.getUTCFullYear(),L=f.getUTCMonth(),x=f.getUTCDate(),w=f.getUTCHours(),C=f.getUTCMinutes(),U=f.getUTCSeconds(),k=f.getUTCMilliseconds();f=(0>=y||y>=1e4?(0>y?"-":"+")+T(6,0>y?-y:y):T(4,y))+"-"+T(2,L+1)+"-"+T(2,x)+"T"+T(2,w)+":"+T(2,C)+":"+T(2,U)+"."+T(3,k)+"Z"}else f=null;if(n&&(f=n.call(e,t,f)),null===f)return"null";if(p=s.call(f),p==v)return""+f;if(p==d)return f>-1/0&&1/0>f?""+f:"null";if(p==g)return S(""+f);if("object"==typeof f){for(E=u.length;E--;)if(u[E]===f)throw TypeError();if(u.push(f),O=[],R=l,l+=c,p==m){for(A=0,E=f.length;E>A;A++)M=D(A,f,n,a,c,l,u),O.push(M===i?"null":M);q=O.length?c?"[\n"+l+O.join(",\n"+l)+"\n"+R+"]":"["+O.join(",")+"]":"[]"}else r(a||f,function(t){var e=D(t,f,n,a,c,l,u);e!==i&&O.push(S(t)+":"+(c?" ":"")+e)}),q=O.length?c?"{\n"+l+O.join(",\n"+l)+"\n"+R+"}":"{"+O.join(",")+"}":"{}";return u.pop(),q}};l.stringify=function(t,e,n){var o,r,i,a;if("function"==typeof e||"object"==typeof e&&e)if((a=s.call(e))==p)r=e;else if(a==m){i={};for(var c,l=0,u=e.length;u>l;c=e[l++],a=s.call(c),(a==g||a==d)&&(i[c]=1));}if(n)if((a=s.call(n))==d){if((n-=n%1)>0)for(o="",n>10&&(n=10);o.length<n;o+=" ");}else a==g&&(o=n.length<=10?n:n.slice(0,10));return D("",(c={},c[""]=t,c),r,i,o,"",[])}}if(!e("json-parse")){var k,O,M=String.fromCharCode,A={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},E=function(){throw k=O=null,SyntaxError()},R=function(){for(var t,e,n,o,r,i=O,s=i.length;s>k;)switch(r=i.charCodeAt(k)){case 9:case 10:case 13:case 32:k++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=y?i.charAt(k):i[k],k++,t;case 34:for(t="@",k++;s>k;)if(r=i.charCodeAt(k),32>r)E();else if(92==r)switch(r=i.charCodeAt(++k)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=A[r],k++;break;case 117:for(e=++k,n=k+4;n>k;k++)r=i.charCodeAt(k),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||E();t+=M("0x"+i.slice(e,k));break;default:E()}else{if(34==r)break;for(r=i.charCodeAt(k),e=k;r>=32&&92!=r&&34!=r;)r=i.charCodeAt(++k);t+=i.slice(e,k)}if(34==i.charCodeAt(k))return k++,t;E();default:if(e=k,45==r&&(o=!0,r=i.charCodeAt(++k)),r>=48&&57>=r){for(48==r&&(r=i.charCodeAt(k+1),r>=48&&57>=r)&&E(),o=!1;s>k&&(r=i.charCodeAt(k),r>=48&&57>=r);k++);if(46==i.charCodeAt(k)){for(n=++k;s>n&&(r=i.charCodeAt(n),r>=48&&57>=r);n++);n==k&&E(),k=n}if(r=i.charCodeAt(k),101==r||69==r){for(r=i.charCodeAt(++k),(43==r||45==r)&&k++,n=k;s>n&&(r=i.charCodeAt(n),r>=48&&57>=r);n++);n==k&&E(),k=n}return+i.slice(e,k)}if(o&&E(),"true"==i.slice(k,k+4))return k+=4,!0;if("false"==i.slice(k,k+5))return k+=5,!1;if("null"==i.slice(k,k+4))return k+=4,null;E()}return"$"},q=function(t){var e,n;if("$"==t&&E(),"string"==typeof t){if("@"==(y?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=R(),"]"!=t;n||(n=!0))n&&(","==t?(t=R(),"]"==t&&E()):E()),","==t&&E(),e.push(q(t));return e}if("{"==t){for(e={};t=R(),"}"!=t;n||(n=!0))n&&(","==t?(t=R(),"}"==t&&E()):E()),(","==t||"string"!=typeof t||"@"!=(y?t.charAt(0):t[0])||":"!=R())&&E(),e[t.slice(1)]=q(R());return e}E()}return t},H=function(t,e,n){var o=P(t,e,n);o===i?delete t[e]:t[e]=o},P=function(t,e,n){var o,i=t[e];if("object"==typeof i&&i)if(s.call(i)==m)for(o=i.length;o--;)H(i,o,n);else r(i,function(t){H(i,t,n)});return n.call(t,e,i)};l.parse=function(t,e){var n,o;return k=0,O=""+t,n=q(R()),"$"!=R()&&E(),k=O=null,e&&s.call(e)==p?P((o={},o[""]=n,o),"",e):n}}}a&&define(function(){return l})}(this)},{}],4:[function(t,e){e.exports={author:"Rune Tvilum",name:"geokeys.js",description:"Leaflet search control using GST GeoKeys",version:"0.0.1",homepage:"http://www.kortforsyningen.dk/",repository:{type:"git",url:"git://github.com/runetvilum/geokeys.js.git"},main:"index.js",dependencies:{corslite:"0.0.5",json3:"git://github.com/bestiejs/json3.git#v3.2.6"},scripts:{test:"jshint src/*.js && mocha-phantomjs test/index.html"},devDependencies:{"uglify-js":"2.4.8",mocha:"1.17.1","expect.js":"0.3.1",sinon:"1.8.2","mocha-phantomjs":"3.1.6",happen:"0.1.3",browserify:"3.23.1",jshint:"2.4.4",minimist:"0.0.5",marked:"~0.3.0"},optionalDependencies:{},engines:{node:"*"}}},{}],5:[function(t,e){"use strict";e.exports={HTTP_URLS:["http://a.tiles.mapbox.com/v3/","http://b.tiles.mapbox.com/v3/","http://c.tiles.mapbox.com/v3/","http://d.tiles.mapbox.com/v3/"],FORCE_HTTPS:!1,HTTPS_URLS:["https://a.tiles.mapbox.com/v3/","https://b.tiles.mapbox.com/v3/","https://c.tiles.mapbox.com/v3/","https://d.tiles.mapbox.com/v3/"]}},{}],6:[function(t,e){"use strict";var n=t("./util"),o=t("./url"),r=t("./request");e.exports=function(t){var e,i={};return i.getURL=function(){return e},i.setURL=function(t){return e=o.jsonify(t),i},i.queryURL=function(t){if(n.strict(t,"string"),!i.getURL())throw new Error("Url not set");return L.Util.template(i.getURL(),{query:encodeURIComponent(t)})},i.query=function(t,e){return n.strict(t,"string"),n.strict(e,"function"),r(i.queryURL(t),function(t,n){if(n){var o={};n&&n.data?o.results=n.data:n&&n.features&&(o.results=n.features),e(null,o)}else e(t||!0)}),i},"string"==typeof t&&i.setURL(t),i}},{"./request":8,"./url":9,"./util":10}],7:[function(t,e){"use strict";var n=t("./geocoder"),o=L.Control.extend({includes:L.Mixin.Events,proj:proj4("+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs","+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"),version:t("../package.json").version,options:{position:"topleft",pointZoom:16,keepOpen:!1,placeholder:"Search"},initialize:function(t,e){L.Util.setOptions(this,e),this.geocoder=n(t)},_toggle:function(t){t&&L.DomEvent.stop(t),L.DomUtil.hasClass(this._container,"active")?(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur()):(L.DomUtil.addClass(this._container,"active"),this._input.focus(),this._input.select())},_closeIfOpen:function(){L.DomUtil.hasClass(this._container,"active")&&!this.options.keepOpen&&(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur())},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-mapbox-geocoder leaflet-bar leaflet-control"),n=L.DomUtil.create("a","leaflet-control-mapbox-geocoder-toggle mapbox-icon mapbox-icon-geocoder",e),o=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-results",e),r=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-wrap",e),i=L.DomUtil.create("form","leaflet-control-mapbox-geocoder-form",r),s=L.DomUtil.create("input","",i);return n.href="#",n.innerHTML="&nbsp;",s.type="text",s.setAttribute("placeholder",this.options.placeholder),L.DomEvent.addListener(i,"submit",this._geocode,this),L.DomEvent.addListener(s,"keyup",this._geocode,this),L.DomEvent.disableClickPropagation(e),this._map=t,this._results=o,this._input=s,this._form=i,this.options.keepOpen?L.DomUtil.addClass(e,"active"):(this._map.on("click",this._closeIfOpen,this),L.DomEvent.addListener(n,"click",this._toggle,this)),e},_geocode:function(t){L.DomEvent.preventDefault(t),L.DomUtil.addClass(this._container,"searching");var e=this._map,n=L.bind(function(t,e){if(L.DomUtil.removeClass(this._container,"searching"),!t&&e&&e.results&&e.results.length){if(this._results.innerHTML="",1===e.results.length)this.fire("autoselect",{data:e}),o(e.results[0]),this._closeIfOpen();else for(var n=0;n<e.results.length;n++){var r,i=e.results[n];if(i.properties&&i.properties.matnr?r=i.properties.matnr:i.presentationString&&(r=i.presentationString),r){var s=L.DomUtil.create("a","",this._results);s.innerHTML=r,s.href="#",L.bind(function(t){L.DomEvent.addListener(s,"click",function(e){o(t),L.DomEvent.stop(e),this.fire("select",{data:t})},this)},this)(e.results[n])}}this.fire("found",e)}else this.fire("error",{error:t})},this),o=L.bind(function(t){if(t.bbox||t.geometryWkt||t.xMin&&t.xMax&&t.yMin&&t.yMax){var n,o;if(t.bbox){var r=t.bbox;n=this.proj.forward([r[0],r[1]]),o=this.proj.forward([r[2],r[3]])}else if(t.geometryWkt){var i=new Wkt.Wkt;i.read(t.geometryWkt);var s=i.toObject().getBounds();n=this.proj.forward([s.getWest(),s.getSouth()]),o=this.proj.forward([s.getEast(),s.getNorth()])}else n=this.proj.forward([t.xMin,t.yMin]),o=this.proj.forward([t.xMax,t.yMax]);this._map.fitBounds(L.latLngBounds([[n[1],n[0]],[o[1],o[0]]]))}else if(t.x&&t.y){var a=this.proj.forward([t.x,t.y]);this._map.setView([a[1],a[0]],void 0===e.getZoom()?this.options.pointZoom:Math.max(e.getZoom(),this.options.pointZoom))}},this);this.geocoder.query(this._input.value,n)}});e.exports=function(t,e){return new o(t,e)}},{"../package.json":4,"./geocoder":6}],8:[function(t,e){"use strict";var n=t("corslite"),o=t("json3"),r=t("./util").strict;e.exports=function(t,e){function i(t,n){!t&&n&&(n="g"==n.responseText[0]?o.parse(n.responseText.substring(5,n.responseText.length-2)):o.parse(n.responseText)),e(t,n)}return r(t,"string"),r(e,"function"),n(t,i)}},{"./util":10,corslite:2,json3:3}],9:[function(t,e){"use strict";var n=t("./config");e.exports={isSSL:function(){return"https:"===document.location.protocol||n.FORCE_HTTPS},base:function(t){var e=this.isSSL()?n.HTTPS_URLS:n.HTTP_URLS;return void 0===t||"number"!=typeof t?e[0]:e[t%e.length]},secureFlag:function(t){return this.isSSL()?t.match(/(\?|&)secure/)?t:-1!==t.indexOf("?")?t+"&secure":t+"?secure":t},jsonify:function(t){return t.replace(/\.(geo)?jsonp(?=$|\?)/,".$1json")}}},{"./config":5}],10:[function(t,e){"use strict";function n(t,e){if(!e||!e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}e.exports={idUrl:function(t,e){-1==t.indexOf("/")?e.loadID(t):e.loadURL(t)},log:function(t){console&&"function"==typeof console.error&&console.error(t)},strict:function(t,e){if(typeof t!==e)throw new Error("Invalid argument: "+e+" expected")},strict_instance:function(t,e,n){if(!(t instanceof e))throw new Error("Invalid argument: "+n+" expected")},strict_oneof:function(t,e){if(!n(t,e))throw new Error("Invalid argument: "+t+" given, valid values are "+e.join(", "))},strip_tags:function(t){return t.replace(/<[^<]+>/g,"")},lbounds:function(t){return new L.LatLngBounds([[t[1],t[0]],[t[3],t[2]]])}}},{}]},{},[1]);