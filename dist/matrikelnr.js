!function t(e,n,r){function o(s,c){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e){L.geokeys=e.exports={matrikelnr:t("./src/matrikelnr")}},{"./src/matrikelnr":7}],2:[function(t,e){function n(t,e,n){function r(t){return t>=200&&300>t||304===t}function o(){void 0===c.status||r(c.status)?e.call(c,null,c):e.call(c,c,null)}var i=!1;if("undefined"==typeof window.XMLHttpRequest)return e(Error("Browser not supported"));if("undefined"==typeof n){var s=t.match(/^\s*https?:\/\/[^\/]*/);n=s&&s[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var c;if(!n||"object"!=typeof window.XDomainRequest&&"function"!=typeof window.XDomainRequest)c=new window.XMLHttpRequest;else{c=new window.XDomainRequest;var a=e;e=function(){if(i)a.apply(this,arguments);else{var t=this,e=arguments;setTimeout(function(){a.apply(t,e)},0)}}}return"onload"in c?c.onload=o:c.onreadystatechange=function(){4===c.readyState&&o()},c.onerror=function(t){e.call(this,t||!0,null),e=function(){}},c.onprogress=function(){},c.ontimeout=function(t){e.call(this,t,null),e=function(){}},c.onabort=function(t){e.call(this,t,null),e=function(){}},c.open("GET",t,!0),c.send(null),i=!0,c}"undefined"!=typeof e&&(e.exports=n)},{}],3:[function(t,e,n){!function(t){function e(t){if(e[t]!==i)return e[t];var n;if("bug-string-char-index"==t)n="a"!="a"[0];else if("json"==t)n=e("json-stringify")&&e("json-parse");else{var r,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var c=l.stringify,a="function"==typeof c&&u;if(a){(r=function(){return 1}).toJSON=r;try{a="0"===c(0)&&"0"===c(new Number)&&'""'==c(new String)&&c(s)===i&&c(i)===i&&c()===i&&"1"===c(r)&&"[1]"==c([r])&&"[null]"==c([i])&&"null"==c(null)&&"[null,null,null]"==c([i,s,null])&&c({a:[r,!0,!1,null,"\x00\b\n\f\r	"]})==o&&"1"===c(null,r)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new Date(-1))}catch(f){a=!1}}n=a}if("json-parse"==t){var p=l.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){r=p(o);var h=5==r.a.length&&1===r.a[0];if(h){try{h=!p('"	"')}catch(f){}if(h)try{h=1!==p("01")}catch(f){}if(h)try{h=1!==p("1.")}catch(f){}}}}catch(f){h=!1}n=h}}return e[t]=!!n}var r,o,i,s={}.toString,c="function"==typeof define&&define.amd,a="object"==typeof JSON&&JSON,l="object"==typeof n&&n&&!n.nodeType&&n;l&&a?(l.stringify=a.stringify,l.parse=a.parse):l=t.JSON=a||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(f){}if(!e("json")){var p="[object Function]",h="[object Date]",d="[object Number]",g="[object String]",m="[object Array]",v="[object Boolean]",y=e("bug-string-char-index");if(!u)var b=Math.floor,L=[0,31,59,90,120,151,181,212,243,273,304,334],_=function(t,e){return L[e]+365*(t-1970)+b((t-1969+(e=+(e>1)))/4)-b((t-1901+e)/100)+b((t-1601+e)/400)};(r={}.hasOwnProperty)||(r=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=s?r=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,r=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,r.call(this,t)});var x={"boolean":1,number:1,string:1,undefined:1},j=function(t,e){var n=typeof t[e];return"object"==n?!!t[e]:!x[n]};if(o=function(t,e){var n,i,c,a=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(c in i)r.call(i,c)&&a++;return n=i=null,a?o=2==a?function(t,e){var n,o={},i=s.call(t)==p;for(n in t)i&&"prototype"==n||r.call(o,n)||!(o[n]=1)||!r.call(t,n)||e(n)}:function(t,e){var n,o,i=s.call(t)==p;for(n in t)i&&"prototype"==n||!r.call(t,n)||(o="constructor"===n)||e(n);(o||r.call(t,n="constructor"))&&e(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(t,e){var n,o,c=s.call(t)==p,a=!c&&"function"!=typeof t.constructor&&j(t,"hasOwnProperty")?t.hasOwnProperty:r;for(n in t)c&&"prototype"==n||!a.call(t,n)||e(n);for(o=i.length;n=i[--o];a.call(t,n)&&e(n));}),o(t,e)},!e("json-stringify")){var U={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},w="000000",C=function(t,e){return(w+(e||0)).slice(-t)},T="\\u00",S=function(t){var e,n='"',r=0,o=t.length,i=o>10&&y;for(i&&(e=t.split(""));o>r;r++){var s=t.charCodeAt(r);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=U[s];break;default:if(32>s){n+=T+C(2,s.toString(16));break}n+=i?e[r]:y?t.charAt(r):t[r]}}return n+'"'},D=function(t,e,n,c,a,l,u){var f,p,y,L,x,j,U,w,T,k,O,A,E,R,q,P;try{f=e[t]}catch(H){}if("object"==typeof f&&f)if(p=s.call(f),p!=h||r.call(f,"toJSON"))"function"==typeof f.toJSON&&(p!=d&&p!=g&&p!=m||r.call(f,"toJSON"))&&(f=f.toJSON(t));else if(f>-1/0&&1/0>f){if(_){for(x=b(f/864e5),y=b(x/365.2425)+1970-1;_(y+1,0)<=x;y++);for(L=b((x-_(y,0))/30.42);_(y,L+1)<=x;L++);x=1+x-_(y,L),j=(f%864e5+864e5)%864e5,U=b(j/36e5)%24,w=b(j/6e4)%60,T=b(j/1e3)%60,k=j%1e3}else y=f.getUTCFullYear(),L=f.getUTCMonth(),x=f.getUTCDate(),U=f.getUTCHours(),w=f.getUTCMinutes(),T=f.getUTCSeconds(),k=f.getUTCMilliseconds();f=(0>=y||y>=1e4?(0>y?"-":"+")+C(6,0>y?-y:y):C(4,y))+"-"+C(2,L+1)+"-"+C(2,x)+"T"+C(2,U)+":"+C(2,w)+":"+C(2,T)+"."+C(3,k)+"Z"}else f=null;if(n&&(f=n.call(e,t,f)),null===f)return"null";if(p=s.call(f),p==v)return""+f;if(p==d)return f>-1/0&&1/0>f?""+f:"null";if(p==g)return S(""+f);if("object"==typeof f){for(R=u.length;R--;)if(u[R]===f)throw TypeError();if(u.push(f),O=[],q=l,l+=a,p==m){for(E=0,R=f.length;R>E;E++)A=D(E,f,n,c,a,l,u),O.push(A===i?"null":A);P=O.length?a?"[\n"+l+O.join(",\n"+l)+"\n"+q+"]":"["+O.join(",")+"]":"[]"}else o(c||f,function(t){var e=D(t,f,n,c,a,l,u);e!==i&&O.push(S(t)+":"+(a?" ":"")+e)}),P=O.length?a?"{\n"+l+O.join(",\n"+l)+"\n"+q+"}":"{"+O.join(",")+"}":"{}";return u.pop(),P}};l.stringify=function(t,e,n){var r,o,i,c;if("function"==typeof e||"object"==typeof e&&e)if((c=s.call(e))==p)o=e;else if(c==m){i={};for(var a,l=0,u=e.length;u>l;a=e[l++],c=s.call(a),(c==g||c==d)&&(i[a]=1));}if(n)if((c=s.call(n))==d){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else c==g&&(r=n.length<=10?n:n.slice(0,10));return D("",(a={},a[""]=t,a),o,i,r,"",[])}}if(!e("json-parse")){var k,O,A=String.fromCharCode,E={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},R=function(){throw k=O=null,SyntaxError()},q=function(){for(var t,e,n,r,o,i=O,s=i.length;s>k;)switch(o=i.charCodeAt(k)){case 9:case 10:case 13:case 32:k++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=y?i.charAt(k):i[k],k++,t;case 34:for(t="@",k++;s>k;)if(o=i.charCodeAt(k),32>o)R();else if(92==o)switch(o=i.charCodeAt(++k)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=E[o],k++;break;case 117:for(e=++k,n=k+4;n>k;k++)o=i.charCodeAt(k),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||R();t+=A("0x"+i.slice(e,k));break;default:R()}else{if(34==o)break;for(o=i.charCodeAt(k),e=k;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++k);t+=i.slice(e,k)}if(34==i.charCodeAt(k))return k++,t;R();default:if(e=k,45==o&&(r=!0,o=i.charCodeAt(++k)),o>=48&&57>=o){for(48==o&&(o=i.charCodeAt(k+1),o>=48&&57>=o)&&R(),r=!1;s>k&&(o=i.charCodeAt(k),o>=48&&57>=o);k++);if(46==i.charCodeAt(k)){for(n=++k;s>n&&(o=i.charCodeAt(n),o>=48&&57>=o);n++);n==k&&R(),k=n}if(o=i.charCodeAt(k),101==o||69==o){for(o=i.charCodeAt(++k),(43==o||45==o)&&k++,n=k;s>n&&(o=i.charCodeAt(n),o>=48&&57>=o);n++);n==k&&R(),k=n}return+i.slice(e,k)}if(r&&R(),"true"==i.slice(k,k+4))return k+=4,!0;if("false"==i.slice(k,k+5))return k+=5,!1;if("null"==i.slice(k,k+4))return k+=4,null;R()}return"$"},P=function(t){var e,n;if("$"==t&&R(),"string"==typeof t){if("@"==(y?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=q(),"]"!=t;n||(n=!0))n&&(","==t?(t=q(),"]"==t&&R()):R()),","==t&&R(),e.push(P(t));return e}if("{"==t){for(e={};t=q(),"}"!=t;n||(n=!0))n&&(","==t?(t=q(),"}"==t&&R()):R()),(","==t||"string"!=typeof t||"@"!=(y?t.charAt(0):t[0])||":"!=q())&&R(),e[t.slice(1)]=P(q());return e}R()}return t},H=function(t,e,n){var r=M(t,e,n);r===i?delete t[e]:t[e]=r},M=function(t,e,n){var r,i=t[e];if("object"==typeof i&&i)if(s.call(i)==m)for(r=i.length;r--;)H(i,r,n);else o(i,function(t){H(i,t,n)});return n.call(t,e,i)};l.parse=function(t,e){var n,r;return k=0,O=""+t,n=P(q()),"$"!=q()&&R(),k=O=null,e&&s.call(e)==p?M((r={},r[""]=n,r),"",e):n}}}c&&define(function(){return l})}(this)},{}],4:[function(t,e){e.exports={author:"Rune Tvilum",name:"geokeys.js",description:"Leaflet search control using GST GeoKeys",version:"0.0.1",homepage:"http://www.kortforsyningen.dk/",repository:{type:"git",url:"git://github.com/runetvilum/geokeys.js.git"},main:"index.js",dependencies:{corslite:"0.0.5",json3:"git://github.com/bestiejs/json3.git#v3.2.6"},scripts:{test:"jshint src/*.js && mocha-phantomjs test/index.html"},devDependencies:{"uglify-js":"2.4.8",mocha:"1.17.1","expect.js":"0.3.1",sinon:"1.8.2","mocha-phantomjs":"3.1.6",happen:"0.1.3",browserify:"3.23.1",jshint:"2.4.4",minimist:"0.0.5",marked:"~0.3.0"},optionalDependencies:{},engines:{node:"*"}}},{}],5:[function(t,e){"use strict";e.exports={HTTP_URLS:["http://a.tiles.mapbox.com/v3/","http://b.tiles.mapbox.com/v3/","http://c.tiles.mapbox.com/v3/","http://d.tiles.mapbox.com/v3/"],FORCE_HTTPS:!1,HTTPS_URLS:["https://a.tiles.mapbox.com/v3/","https://b.tiles.mapbox.com/v3/","https://c.tiles.mapbox.com/v3/","https://d.tiles.mapbox.com/v3/"]}},{}],6:[function(t,e){"use strict";var n=t("./util"),r=t("./url"),o=t("./request");e.exports=function(t){var e,i={};return i.getURL=function(){return e},i.setURL=function(t){return e=r.jsonify(t),i},i.queryURL=function(t){if(n.strict(t,"string"),!i.getURL())throw new Error("Url not set");return L.Util.template(i.getURL(),{query:encodeURIComponent(t)})},i.query=function(t,e){return n.strict(t,"string"),n.strict(e,"function"),o(i.queryURL(t),function(t,n){if(n){var r={};n&&n.data?r.results=n.data:n&&n.features&&(r.results=n.features),e(null,r)}else e(t||!0)}),i},"string"==typeof t&&i.setURL(t),i}},{"./request":8,"./url":9,"./util":10}],7:[function(t,e){"use strict";var n=t("./geocoder"),r=L.Control.extend({includes:L.Mixin.Events,version:t("../package.json").version,options:{position:"topleft",pointZoom:16,keepOpen:!1,placeholder:"Search"},urlParams:{servicename:"RestGeokeys_v2",method:"matrikelnr",ejkode:"10051",georef:"EPSG:4326",hits:1e4},initialize:function(t,e){L.Util.setOptions(this,t),L.Util.extend(this.urlParams,e);var r="http://kortforsyningen.kms.dk/"+L.Util.getParamString(this.urlParams)+"&matnr={query}*";this.geocoder=n(r)},_toggle:function(t){t&&L.DomEvent.stop(t),L.DomUtil.hasClass(this._container,"active")?(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur()):(L.DomUtil.addClass(this._container,"active"),this._input.focus(),this._input.select())},_closeIfOpen:function(){L.DomUtil.hasClass(this._container,"active")&&!this.options.keepOpen&&(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur())},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-mapbox-geocoder leaflet-bar leaflet-control"),n=L.DomUtil.create("a","leaflet-control-mapbox-geocoder-toggle mapbox-icon mapbox-icon-geocoder",e),r=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-results",e),o=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-wrap",e),i=L.DomUtil.create("form","leaflet-control-mapbox-geocoder-form",o),s=L.DomUtil.create("input","",i);return n.href="#",n.innerHTML="&nbsp;",s.type="text",s.setAttribute("placeholder",this.options.placeholder),L.DomEvent.addListener(i,"submit",this._geocode,this),L.DomEvent.addListener(s,"keyup",this._geocode,this),L.DomEvent.disableClickPropagation(e),this._map=t,this._results=r,this._input=s,this._form=i,this.options.keepOpen?L.DomUtil.addClass(e,"active"):(this._map.on("click",this._closeIfOpen,this),L.DomEvent.addListener(n,"click",this._toggle,this)),e},_geocode:function(t){L.DomEvent.preventDefault(t),L.DomUtil.addClass(this._container,"searching");var e=(this._map,L.bind(function(t,e){if(L.DomUtil.removeClass(this._container,"searching"),!t&&e&&e.results&&e.results.length){if(this._results.innerHTML="",1===e.results.length)this.fire("autoselect",{data:e}),n(e.results[0]),this._closeIfOpen();else for(var r=0;r<e.results.length;r++){var o=e.results[r];if(o.properties&&o.properties.matnr){var i=L.DomUtil.create("a","",this._results);i.innerHTML=o.properties.matnr,i.href="#",L.bind(function(t){L.DomEvent.addListener(i,"click",function(e){n(t),L.DomEvent.stop(e),this.fire("select",{data:t})},this)},this)(e.results[r])}}this.fire("found",e)}else this.fire("error",{error:t})},this)),n=L.bind(function(t){t.bbox&&this._map.fitBounds(L.latLngBounds([[t.bbox[1],t.bbox[0]],[t.bbox[3],t.bbox[2]]]))},this);this.geocoder.query(this._input.value,e)}});e.exports=function(t,e){return new r(t,e)}},{"../package.json":4,"./geocoder":6}],8:[function(t,e){"use strict";var n=t("corslite"),r=t("json3"),o=t("./util").strict;e.exports=function(t,e){function i(t,n){!t&&n&&(n="g"==n.responseText[0]?r.parse(n.responseText.substring(5,n.responseText.length-2)):r.parse(n.responseText)),e(t,n)}return o(t,"string"),o(e,"function"),n(t,i)}},{"./util":10,corslite:2,json3:3}],9:[function(t,e){"use strict";var n=t("./config");e.exports={isSSL:function(){return"https:"===document.location.protocol||n.FORCE_HTTPS},base:function(t){var e=this.isSSL()?n.HTTPS_URLS:n.HTTP_URLS;return void 0===t||"number"!=typeof t?e[0]:e[t%e.length]},secureFlag:function(t){return this.isSSL()?t.match(/(\?|&)secure/)?t:-1!==t.indexOf("?")?t+"&secure":t+"?secure":t},jsonify:function(t){return t.replace(/\.(geo)?jsonp(?=$|\?)/,".$1json")}}},{"./config":5}],10:[function(t,e){"use strict";function n(t,e){if(!e||!e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}e.exports={idUrl:function(t,e){-1==t.indexOf("/")?e.loadID(t):e.loadURL(t)},log:function(t){console&&"function"==typeof console.error&&console.error(t)},strict:function(t,e){if(typeof t!==e)throw new Error("Invalid argument: "+e+" expected")},strict_instance:function(t,e,n){if(!(t instanceof e))throw new Error("Invalid argument: "+n+" expected")},strict_oneof:function(t,e){if(!n(t,e))throw new Error("Invalid argument: "+t+" given, valid values are "+e.join(", "))},strip_tags:function(t){return t.replace(/<[^<]+>/g,"")},lbounds:function(t){return new L.LatLngBounds([[t[1],t[0]],[t[3],t[2]]])}}},{}]},{},[1]);